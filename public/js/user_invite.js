(self.webpackChunkpixelfed=self.webpackChunkpixelfed||[]).push([[7129],{2979:(t,e,s)=>{"use strict";s.r(e),s.d(e,{render:()=>i,staticRenderFns:()=>a});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"user-invite-component"},[e("div",{staticClass:"user-invite-component-inner"},[e("div",{staticClass:"card bg-dark"},[0===t.tabIndex?e("div",{staticClass:"card-body d-flex align-items-center justify-content-center"},[e("div",{staticClass:"text-center"},[e("b-spinner",{attrs:{variant:"muted"}}),t._v(" "),e("p",{staticClass:"text-muted mb-0"},[t._v("Loading...")])],1)]):1===t.tabIndex?e("div",{staticClass:"card-body"},[t._m(0),t._v(" "),e("div",{staticClass:"d-flex flex-column align-items-center justify-content-center"},[e("p",{staticClass:"lead mb-1 text-muted"},[t._v("You've been invited to join")]),t._v(" "),e("p",{staticClass:"h3 mb-2"},[t._v(t._s(t.instance.uri))]),t._v(" "),e("p",{staticClass:"mb-0 text-muted"},[e("span",[t._v(t._s(t.instance.stats.user_count.toLocaleString("en-CA",{compactDisplay:"short",notation:"compact"}))+" users")]),t._v(" "),e("span",[t._v("Â·")]),t._v(" "),e("span",[t._v(t._s(t.instance.stats.status_count.toLocaleString("en-CA",{compactDisplay:"short",notation:"compact"}))+" posts")])]),t._v(" "),"You've been invited to join"!=t.inviteConfig.message?e("div",[e("div",{staticClass:"user-message"},[e("p",{staticClass:"small text-light mb-0"},[t._v("Message from user(s):")]),t._v("\n                            "+t._s(t.inviteConfig.message)+"\n                        ")])]):t._e()]),t._v(" "),e("div",{staticClass:"mt-5"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"username"}},[t._v("Username")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.username,expression:"form.username"}],staticClass:"form-control form-control-lg",attrs:{type:"text",placeholder:"What should everyone call you?",minlength:"2",maxlength:"15"},domProps:{value:t.form.username},on:{input:function(e){e.target.composing||t.$set(t.form,"username",e.target.value)}}}),t._v(" "),t.errors.username?e("p",{staticClass:"form-text text-danger"},[e("i",{staticClass:"far fa-exclamation-triangle mr-1"}),t._v("\n                            "+t._s(t.errors.username)+"\n                        ")]):t._e()]),t._v(" "),e("button",{staticClass:"btn btn-primary btn-block font-weight-bold",attrs:{disabled:t.isProceeding||!t.form.username||t.form.username.length<2},on:{click:function(e){return t.proceed(t.tabIndex)}}},[t.isProceeding?[e("b-spinner",{attrs:{small:""}})]:[t._v("\n                            Continue\n                        ")]],2),t._v(" "),t._m(1),t._v(" "),t._m(2)])]):2===t.tabIndex?e("div",{staticClass:"card-body"},[t._m(3),t._v(" "),e("div",{staticClass:"d-flex flex-column align-items-center justify-content-center"},[e("p",{staticClass:"lead mb-1 text-muted"},[t._v("You've been invited to join")]),t._v(" "),e("p",{staticClass:"h3 mb-2"},[t._v(t._s(t.instance.uri))])]),t._v(" "),e("div",{staticClass:"mt-5"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"username"}},[t._v("Email Address")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],staticClass:"form-control form-control-lg",attrs:{type:"email",placeholder:"Your email address"},domProps:{value:t.form.email},on:{input:function(e){e.target.composing||t.$set(t.form,"email",e.target.value)}}}),t._v(" "),t.errors.email?e("p",{staticClass:"form-text text-danger"},[e("i",{staticClass:"far fa-exclamation-triangle mr-1"}),t._v("\n                            "+t._s(t.errors.email)+"\n                        ")]):t._e()]),t._v(" "),e("button",{staticClass:"btn btn-primary btn-block font-weight-bold",attrs:{disabled:t.isProceeding||!t.form.email||!t.validateEmail()},on:{click:function(e){return t.proceed(t.tabIndex)}}},[t.isProceeding?[e("b-spinner",{attrs:{small:""}})]:[t._v("\n                            Continue\n                        ")]],2)])]):3===t.tabIndex?e("div",{staticClass:"card-body"},[t._m(4),t._v(" "),e("div",{staticClass:"d-flex flex-column align-items-center justify-content-center"},[e("p",{staticClass:"lead mb-1 text-muted"},[t._v("You've been invited to join")]),t._v(" "),e("p",{staticClass:"h3 mb-2"},[t._v(t._s(t.instance.uri))])]),t._v(" "),e("div",{staticClass:"mt-5"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"username"}},[t._v("Password")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],staticClass:"form-control form-control-lg",attrs:{type:"password",placeholder:"Use a secure password",minlength:"8"},domProps:{value:t.form.password},on:{input:function(e){e.target.composing||t.$set(t.form,"password",e.target.value)}}}),t._v(" "),t.errors.password?e("p",{staticClass:"form-text text-danger"},[e("i",{staticClass:"far fa-exclamation-triangle mr-1"}),t._v("\n                            "+t._s(t.errors.password)+"\n                        ")]):t._e()]),t._v(" "),e("button",{staticClass:"btn btn-primary btn-block font-weight-bold",attrs:{disabled:t.isProceeding||!t.form.password||t.form.password.length<8},on:{click:function(e){return t.proceed(t.tabIndex)}}},[t.isProceeding?[e("b-spinner",{attrs:{small:""}})]:[t._v("\n                            Continue\n                        ")]],2)])]):4===t.tabIndex?e("div",{staticClass:"card-body"},[t._m(5),t._v(" "),e("div",{staticClass:"d-flex flex-column align-items-center justify-content-center"},[e("p",{staticClass:"lead mb-1 text-muted"},[t._v("You've been invited to join")]),t._v(" "),e("p",{staticClass:"h3 mb-2"},[t._v(t._s(t.instance.uri))])]),t._v(" "),e("div",{staticClass:"mt-5"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"username"}},[t._v("Confirm Password")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password_confirm,expression:"form.password_confirm"}],staticClass:"form-control form-control-lg",attrs:{type:"password",placeholder:"Use a secure password",minlength:"8"},domProps:{value:t.form.password_confirm},on:{input:function(e){e.target.composing||t.$set(t.form,"password_confirm",e.target.value)}}}),t._v(" "),t.errors.password_confirm?e("p",{staticClass:"form-text text-danger"},[e("i",{staticClass:"far fa-exclamation-triangle mr-1"}),t._v("\n                            "+t._s(t.errors.password_confirm)+"\n                        ")]):t._e()]),t._v(" "),e("button",{staticClass:"btn btn-primary btn-block font-weight-bold",attrs:{disabled:t.isProceeding||!t.form.password_confirm||t.form.password!==t.form.password_confirm},on:{click:function(e){return t.proceed(t.tabIndex)}}},[t.isProceeding?[e("b-spinner",{attrs:{small:""}})]:[t._v("\n                            Continue\n                        ")]],2)])]):5===t.tabIndex?e("div",{staticClass:"card-body"},[t._m(6),t._v(" "),e("div",{staticClass:"d-flex flex-column align-items-center justify-content-center"},[e("p",{staticClass:"lead mb-1 text-muted"},[t._v("You've been invited to join")]),t._v(" "),e("p",{staticClass:"h3 mb-2"},[t._v(t._s(t.instance.uri))])]),t._v(" "),e("div",{staticClass:"mt-5"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"username"}},[t._v("Display Name")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.display_name,expression:"form.display_name"}],staticClass:"form-control form-control-lg",attrs:{type:"text",placeholder:"Add an optional display name",minlength:"8"},domProps:{value:t.form.display_name},on:{input:function(e){e.target.composing||t.$set(t.form,"display_name",e.target.value)}}}),t._v(" "),t.errors.display_name?e("p",{staticClass:"form-text text-danger"},[e("i",{staticClass:"far fa-exclamation-triangle mr-1"}),t._v("\n                            "+t._s(t.errors.display_name)+"\n                        ")]):t._e()]),t._v(" "),e("button",{staticClass:"btn btn-primary btn-block font-weight-bold",attrs:{disabled:t.isProceeding},on:{click:function(e){return t.proceed(t.tabIndex)}}},[t.isProceeding?[e("b-spinner",{attrs:{small:""}})]:[t._v("\n                            Continue\n                        ")]],2)])]):6===t.tabIndex?e("div",{staticClass:"card-body d-flex flex-column"},[t._m(7),t._v(" "),e("div",{staticClass:"d-flex flex-column align-items-center justify-content-center"},[e("p",{staticClass:"lead mb-1 text-muted"},[t._v("You've been invited to join")]),t._v(" "),e("p",{staticClass:"h3 mb-2"},[t._v(t._s(t.instance.uri))])]),t._v(" "),e("div",{staticClass:"mt-5 d-flex align-items-center justify-content-center flex-column flex-grow-1"},[e("b-spinner",{attrs:{variant:"muted"}}),t._v(" "),e("p",{staticClass:"text-muted"},[t._v("Registering...")])],1)]):"invalid-code"===t.tabIndex?e("div",{staticClass:"card-body d-flex align-items-center justify-content-center"},[t._m(8)]):e("div",{staticClass:"card-body"},[e("p",[t._v("An error occured.")])])])])])},a=[function(){var t=this._self._c;return t("div",{staticClass:"d-flex justify-content-center my-3"},[t("img",{attrs:{src:"/img/pixelfed-icon-color.png",width:"60",alt:"Pixelfed logo"}})])},function(){var t=this._self._c;return t("p",{staticClass:"login-link"},[t("a",{attrs:{href:"/login"}},[this._v("Already have an account?")])])},function(){var t=this,e=t._self._c;return e("p",{staticClass:"register-terms"},[t._v("\n                        By registering, you agree to our "),e("a",{attrs:{href:"/site/terms"}},[t._v("Terms of Service")]),t._v(" and "),e("a",{attrs:{href:"/site/privacy"}},[t._v("Privacy Policy")]),t._v(".\n                    ")])},function(){var t=this._self._c;return t("div",{staticClass:"d-flex justify-content-center my-3"},[t("img",{attrs:{src:"/img/pixelfed-icon-color.png",width:"60",alt:"Pixelfed logo"}})])},function(){var t=this._self._c;return t("div",{staticClass:"d-flex justify-content-center my-3"},[t("img",{attrs:{src:"/img/pixelfed-icon-color.png",width:"60",alt:"Pixelfed logo"}})])},function(){var t=this._self._c;return t("div",{staticClass:"d-flex justify-content-center my-3"},[t("img",{attrs:{src:"/img/pixelfed-icon-color.png",width:"60",alt:"Pixelfed logo"}})])},function(){var t=this._self._c;return t("div",{staticClass:"d-flex justify-content-center my-3"},[t("img",{attrs:{src:"/img/pixelfed-icon-color.png",width:"60",alt:"Pixelfed logo"}})])},function(){var t=this._self._c;return t("div",{staticClass:"d-flex justify-content-center my-3"},[t("img",{attrs:{src:"/img/pixelfed-icon-color.png",width:"60",alt:"Pixelfed logo"}})])},function(){var t=this,e=t._self._c;return e("div",[e("h1",{staticClass:"text-center"},[t._v("Invalid Invite Code")]),t._v(" "),e("hr"),t._v(" "),e("p",{staticClass:"text-muted mb-1"},[t._v("The invite code you were provided is not valid, this can happen when:")]),t._v(" "),e("ul",{staticClass:"text-muted"},[e("li",[t._v("Invite code has typos")]),t._v(" "),e("li",[t._v("Invite code was already used")]),t._v(" "),e("li",[t._v("Invite code has reached max uses")]),t._v(" "),e("li",[t._v("Invite code has expired")]),t._v(" "),e("li",[t._v("You have been rate limited")])]),t._v(" "),e("hr"),t._v(" "),e("a",{staticClass:"btn btn-primary btn-block rounded-pill font-weight-bold",attrs:{href:"/"}},[t._v("Go back home")])])}]},25729:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>n});var i=s(76798),a=s.n(i)()((function(t){return t[1]}));a.push([t.id,".user-invite-component{font-family:var(--font-family-sans-serif)}.user-invite-component-inner{align-items:center;display:flex;height:100vh;justify-content:center;width:100wv}.user-invite-component-inner .card{border-radius:10px;color:#fff;min-height:530px;padding:1.25rem 2.5rem;width:100%}@media (min-width:768px){.user-invite-component-inner .card{width:30%}}.user-invite-component-inner .card label{color:var(--muted);font-weight:700;text-transform:uppercase}.user-invite-component-inner .card .login-link{font-weight:600;margin-top:10px}.user-invite-component-inner .card .register-terms{color:var(--muted);font-size:12px}.user-invite-component-inner .card .form-control{color:#fff}.user-invite-component-inner .card .user-message{border:1px solid var(--dropdown-item-hover-color);border-radius:5px;color:var(--text-lighter);margin-top:20px;padding:1rem}",""]);const n=a},30137:(t,e,s)=>{Vue.component("user-invite",s(89061).default)},34962:(t,e,s)=>{"use strict";s.r(e);var i=s(2979),a={};for(const t in i)"default"!==t&&(a[t]=()=>i[t]);s.d(e,a)},37165:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>a});var i=s(74692);const a={props:["code"],data:function(){return{instance:{},inviteConfig:{},tabIndex:0,isProceeding:!1,errors:{username:void 0,email:void 0,password:void 0,password_confirm:void 0},form:{username:void 0,email:void 0,password:void 0,password_confirm:void 0,display_name:void 0}}},mounted:function(){this.fetchInstanceData()},methods:{fetchInstanceData:function(){var t=this;axios.get("/api/v1/instance").then((function(e){t.instance=e.data})).then((function(e){t.verifyToken()})).catch((function(t){console.log(t)}))},verifyToken:function(){var t=this;axios.post("/api/v1.1/auth/invite/user/verify",{token:this.code}).then((function(e){t.tabIndex=1,t.inviteConfig=e.data})).catch((function(e){t.tabIndex="invalid-code"}))},checkUsernameAvailability:function(){var t=this;axios.post("/api/v1.1/auth/invite/user/uc",{token:this.code,username:this.form.username}).then((function(e){e&&e.data?(t.isProceeding=!1,t.tabIndex=2):(t.tabIndex="invalid-code",t.isProceeding=!1)})).catch((function(e){e.response.data&&e.response.data.username?(t.errors.username=e.response.data.username[0],t.isProceeding=!1):(t.tabIndex="invalid-code",t.isProceeding=!1)}))},checkEmailAvailability:function(){var t=this;axios.post("/api/v1.1/auth/invite/user/ec",{token:this.code,email:this.form.email}).then((function(e){e&&e.data?(t.isProceeding=!1,t.tabIndex=3):(t.tabIndex="invalid-code",t.isProceeding=!1)})).catch((function(e){e.response.data&&e.response.data.email?(t.errors.email=e.response.data.email[0],t.isProceeding=!1):(t.tabIndex="invalid-code",t.isProceeding=!1)}))},validateEmail:function(){return!(!this.form.email||!this.form.email.length)&&/^[a-zA-Z]+[a-zA-Z0-9_.-]+@[a-zA-Z0-9_.-]+[a-zA-Z]$/i.test(this.form.email)},handleRegistration:function(){var t=i("<form>",{action:"/api/v1.1/auth/invite/user/re",method:"post"}),e={_token:document.head.querySelector('meta[name="csrf-token"]').content,token:this.code,username:this.form.username,name:this.form.display_name,email:this.form.email,password:this.form.password,password_confirm:this.form.password_confirm};i.each(e,(function(e,s){i("<input>").attr({type:"hidden",name:e,value:s}).appendTo(t)})),t.appendTo("body").submit()},proceed:function(t){switch(this.isProceeding=!0,event.currentTarget.blur(),t){case 1:this.checkUsernameAvailability();break;case 2:this.checkEmailAvailability();break;case 3:this.isProceeding=!1,this.tabIndex=4;break;case 4:this.isProceeding=!1,this.tabIndex=5;break;case 5:this.tabIndex=6,this.handleRegistration()}}}}},76374:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>n});var i=s(37165),a={};for(const t in i)"default"!==t&&(a[t]=()=>i[t]);s.d(e,a);const n=i.default},82097:(t,e,s)=>{"use strict";s.r(e);var i=s(97676),a={};for(const t in i)"default"!==t&&(a[t]=()=>i[t]);s.d(e,a)},89061:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>r});var i=s(34962),a=s(76374),n={};for(const t in a)"default"!==t&&(n[t]=()=>a[t]);s.d(e,n);s(82097);const r=(0,s(14486).default)(a.default,i.render,i.staticRenderFns,!1,null,null,null).exports},97676:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>o});var i=s(85072),a=s.n(i),n=s(25729),r={insert:"head",singleton:!1};a()(n.default,r);const o=n.default.locals||{}}},t=>{t.O(0,[3660],(()=>{return e=30137,t(t.s=e);var e}));t.O()}]);